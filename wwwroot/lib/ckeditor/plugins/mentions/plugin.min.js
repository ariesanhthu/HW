!function(){function i(t,e){var n,i,o,s,a,r=e.feed;function c(t,e){var n=t.slice(0,e).match(a);if(!n)return null;t=t[n.index-1];return void 0===t||t.match(/\s+/)?{start:n.index,end:e}:null}this.caseSensitive=e.caseSensitive,this.marker=e.hasOwnProperty("marker")?e.marker:"@",this.minChars=null!==e.minChars&&void 0!==e.minChars?e.minChars:2,(n=e.pattern)||(n=this.minChars,i="\\"+this.marker+"[_a-zA-Z0-9À-ž]",i=(n?i+"{"+n+",}":i+"*")+"$",n=new RegExp(i)),this.pattern=n,this.cache=void 0===e.cache||e.cache,this.followingSpace=e.followingSpace,this.throttle=void 0!==e.throttle?e.throttle:200,this._autocomplete=new CKEDITOR.plugins.autocomplete(t,{textTestCallback:(this.marker,this.minChars,a=this.pattern,function(t){return t.collapsed?CKEDITOR.plugins.textMatch.match(t,c):null}),dataCallback:(o=r,s=this,function(t,e){function n(t){t&&(t=CKEDITOR.tools.array.map(t,function(t){return CKEDITOR.tools.object.merge(t,{name:s.marker+t.name})}),e(t))}var i,a,r=t.query;s.marker&&(r=r.substring(s.marker.length)),CKEDITOR.tools.array.isArray(o)?(i=1,n(CKEDITOR.tools.array.reduce(o,function(t,e){return t.push({name:e,id:i++}),t},[]).filter(function(t){return t=t.name,s.caseSensitive||(t=t.toLowerCase(),r=r.toLowerCase()),0===t.indexOf(r)}))):"string"!=typeof o?o({query:r,marker:s.marker},n):(a=new CKEDITOR.template(o).output({encodedQuery:encodeURIComponent(r)}),s.cache&&l[a]?n(l[a]):CKEDITOR.ajax.load(a,function(t){t=JSON.parse(t),s.cache&&null!==t&&(l[a]=t),n(t)}))}),itemTemplate:e.itemTemplate,outputTemplate:e.outputTemplate,throttle:this.throttle,itemsLimit:e.itemsLimit,followingSpace:this.followingSpace})}CKEDITOR._.mentions={cache:{}};var l=CKEDITOR._.mentions.cache;CKEDITOR.plugins.add("mentions",{requires:"autocomplete,textmatch,ajax",instances:[],init:function(e){var n=this;e.on("instanceReady",function(){CKEDITOR.tools.array.forEach(e.config.mentions||[],function(t){n.instances.push(new i(e,t))})})},isSupportedEnvironment:function(t){return t.plugins.autocomplete.isSupportedEnvironment(t)}}),i.prototype={destroy:function(){this._autocomplete.destroy()}},CKEDITOR.plugins.mentions=i}();